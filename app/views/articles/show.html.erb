<header>
  <link href="https://fonts.googleapis.com/css?family=Fira+Sans+Extra+Condensed&display=swap" rel="stylesheet">
</header>
<br />
<div class="page-content">
  <br />
  <% if @article.published || current_user && current_user == @article.user %>
  <% unless @article.published %>
      <h2 class="draft">DRAFT</h2>
    <% end %>
    <h2 class="post-title"><%= @article.title %></h2>
    <div class="well col-xs-8 col-xs-offset-2">
    <br />
    <center><p class="date-text"><%= @article.scheduled_for.strftime("%B %d, %Y").upcase %></center>
    <hr>
    <div class="post"><%= @article.post %></div>
    <br />
    <hr>
    <h2>Comments</h2>
    <p style="display: inline;">This article has <%= @article.comments.count %> comments. </p> <button
      style="display: inline;" type="button" class="btn btn-success btn-sm" data-toggle="modal"
      data-target="#comment-modal">
      Add a comment
    </button>
    <br /><br />
    <div class="comments">
      <table style="width: 100%" border="0">
        <tbody>
          <% @article.comments.each do |comment| %>
            <tr class="space">
              <td>
                <p>
                  <strong><%= comment.commenter %> wrote:</strong>
                </p>
                <p class="text-left">
                  <strong><%= comment.body %></strong>
                </p>
                <p class="text-muted text-center white-background-date">
                  <%= time_ago_in_words(comment.created_at) %> ago
                </p>
              </td>
              <td style="width: 2%;">
               <%= link_to [comment.article, comment], method: :delete, data: { confirm: "Are you sure you want to delete this comment?"}  do %>
                <i class="fa fa-trash" aria-hidden="true"></i>
              <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
   
    <% if current_user && current_user == @article.user %>
      <%= link_to "Edit", edit_article_path(@article) %> |
      <%= link_to 'Back', articles_path %> | 
      <%= link_to "Delete", article_path(@article), method: :delete, data: { confirm: "Are you sure you want to delete this article?"} %>
      <br />
      <br />
      <br />
    <% end %>
    </div>
  <% end %>
  <br class="clear" />
</div>
<br />
<br />
<br />
<br />
<br />

<br />

<div class="modal fade" id="comment-modal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title text-center">Add a comment</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

    <%= simple_form_for([@article, @article.comments.build]) do |f| %>

    <p> 
      <%= f.input :commenter, label: 'comment as:' %> 
   
      <%= f.input :body, label: 'What would you like to say?' %>
    </p>

        </div>
        <div class="modal-footer">
          <%= f.button :submit, class: 'btn btn-success' %>
        <% end %>
      </div>
    </div>
  </div>
</div>

